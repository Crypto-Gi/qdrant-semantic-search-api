# ===== Global Settings =====
# Environment mode: "development" or "production"
# In production mode, HTTPS and API key are required
ENVIRONMENT=development

# Application Settings
DEBUG=false
REQUEST_TIMEOUT=30

# ===== API Key Authentication =====
# Enable API key authentication for all endpoints
# When enabled, all requests must include: Authorization: Bearer <API_KEY>
API_KEY_ENABLED=false
# Your secret API key (generate a secure random string)
# Example: openssl rand -hex 32
API_KEY=

# ===== Development Environment Configuration =====
# Used when use_production=false (default) or when PROD_* variables are not set
# Development typically uses HTTP without API key for local testing
DEV_QDRANT_URL=http://localhost:6333
DEV_QDRANT_API_KEY=
DEV_QDRANT_VERIFY_SSL=false

# ===== Production Environment Configuration =====
# Used when use_production=true in API requests
# Production should use HTTPS with API key authentication
PROD_QDRANT_URL=https://qdrant.example.com:6333
PROD_QDRANT_API_KEY=your-production-api-key-here
PROD_QDRANT_VERIFY_SSL=true

# ===== Fallback Configuration (Backward Compatibility) =====
# These variables are used if environment-specific (DEV_*/PROD_*) variables are not set
# Existing deployments can continue using these without changes
QDRANT_URL=
QDRANT_API_KEY=
QDRANT_VERIFY_SSL=true
QDRANT_HOST=192.168.153.47

# ===== SSL Configuration =====
# Force ignore SSL verification (overrides all VERIFY_SSL settings)
# WARNING: Only use for development/testing with self-signed certificates
# NEVER set to true in production!
QDRANT_FORCE_IGNORE_SSL=false

# ===== Other Services =====
OLLAMA_HOST=192.168.153.46

# ===== Embedding Provider Configuration =====
# Choose embedding provider: "ollama" (default) or "gemini"
# Ollama: Uses local Ollama server (existing behavior, no breaking changes)
# Gemini: Uses Google Gemini Embeddings API (requires GEMINI_API_KEY)
EMBEDDING_PROVIDER=ollama

# ----- Ollama Configuration (used when EMBEDDING_PROVIDER=ollama) -----
# Model name for embeddings (e.g., mxbai-embed-large, bge-m3, granite-embedding)
DEFAULT_EMBEDDING_MODEL=mxbai-embed-large
# Vector size must match your Qdrant collection configuration
DEFAULT_VECTOR_SIZE=1024

# ----- Gemini Configuration (used when EMBEDDING_PROVIDER=gemini) -----
# Google Gemini API key (required for Gemini provider)
# Get your API key from: https://aistudio.google.com/apikey
GEMINI_API_KEY=

# Gemini embedding model (default: gemini-embedding-001)
GEMINI_EMBEDDING_MODEL=gemini-embedding-001

# Task type for query embeddings (default: RETRIEVAL_QUERY)
# Options: RETRIEVAL_QUERY, SEMANTIC_SIMILARITY, CLASSIFICATION, CLUSTERING
# For search/retrieval use cases, use RETRIEVAL_QUERY for queries
# Note: Your indexing pipeline should use RETRIEVAL_DOCUMENT for documents
GEMINI_EMBEDDING_TASK_TYPE=RETRIEVAL_QUERY

# Output dimensionality (default: 768)
# Must match your Qdrant collection vector size
# Recommended values: 768, 1536, 3072
# Lower dimensions = faster search + less storage, slightly lower quality
GEMINI_EMBEDDING_DIM=768

# ===== Configuration Priority =====
# The system uses the following priority order for each setting:
# 1. Request parameters (qdrant_url, qdrant_api_key, qdrant_verify_ssl in API request)
# 2. Environment-specific variables (DEV_* or PROD_* based on use_production flag)
# 3. Generic environment variables (QDRANT_URL, QDRANT_API_KEY, QDRANT_VERIFY_SSL)
# 4. QDRANT_HOST with http:// prefix (fallback)
# 5. Hardcoded defaults

# ===== Migration Notes =====
# Migrating from v1 to v2:
# 1. Your existing QDRANT_HOST configuration will continue to work
# 2. To add HTTPS: Set QDRANT_URL=https://your-host:6333
# 3. To add API key: Set QDRANT_API_KEY=your-key
# 4. To use dual environments: Configure both DEV_* and PROD_* variables
# 5. Switch between environments using use_production flag in API requests

# ===== Examples =====
# Example 1: Local development (HTTP, no auth)
#   DEV_QDRANT_URL=http://localhost:6333
#   DEV_QDRANT_API_KEY=
#   DEV_QDRANT_VERIFY_SSL=false

# Example 2: Production (HTTPS with auth)
#   PROD_QDRANT_URL=https://qdrant.prod.example.com:6333
#   PROD_QDRANT_API_KEY=prod-secret-key-12345
#   PROD_QDRANT_VERIFY_SSL=true

# Example 3: Self-signed certificate (development only)
#   DEV_QDRANT_URL=https://dev.qdrant.local:6333
#   DEV_QDRANT_API_KEY=dev-key
#   QDRANT_FORCE_IGNORE_SSL=true  # Only for dev!
